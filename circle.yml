--- 
dependencies: 
  bundler: 
    without: 
      - development
  cache_directories: 
    - ~/.rvm/gems
  override: 
    - 
      ? "bundle install --without development"
      : 
        environment: 
          PUPPET_GEM_VERSION: "~> 4.0"
          STRICT_VARIABLES: true
        timeout: 240
  post: 
    - "rvm cleanup all"
machine: 
  environment: 
    BEAKER_destroy: no
    PUPPET_GEM_VERSION: "~> 4.0"
    STRICT_VARIABLES: true
  ruby: 
    version: "2.1.6"
  services: 
    - docker
notify: 
  webhooks: 
    - 
      url: "https://webhooks.gitter.im/e/da8c065419a91983f0cf"
test: 
  override: 
    - "bundle exec rake metadata_lint"
    - "bundle exec rake rubocop"
    - "bundle exec rake lint"
    - "bundle exec rake validate"
    - "bundle exec rake spec SPEC_OPTS=\"--format RspecJunitFormatter -o $CIRCLE_TEST_REPORTS/rspec/puppet.xml\""
    - "bundle exec rake beaker"
